Snapshot code, might need to be moved into assert folder
